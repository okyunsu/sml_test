# ğŸ—ï¸ News Analysis System - ì „ì²´ í”„ë¡œì íŠ¸ ê°€ì´ë“œ

## ğŸ“‹ ì‹œìŠ¤í…œ ê°œìš”

News Analysis Systemì€ **ë‰´ìŠ¤ ê²€ìƒ‰, AI ë¶„ì„, ìºì‹œ ê´€ë¦¬**ë¥¼ ì œê³µí•˜ëŠ” ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ì…ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚    â”‚   Gateway       â”‚    â”‚  News Service   â”‚
â”‚   (React/Vue)   â”‚â—„â”€â”€â–ºâ”‚   (API Proxy)   â”‚â—„â”€â”€â–ºâ”‚   (Core API)    â”‚
â”‚   Port: 3000    â”‚    â”‚   Port: 8080    â”‚    â”‚   Port: 8002    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚                        â”‚
                                â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                â”‚              â”‚     Redis       â”‚
                                â”‚              â”‚   (Cache DB)    â”‚
                                â”‚              â”‚   Port: 6379    â”‚
                                â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚                        â”‚
                                â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  Celery Worker  â”‚
                                               â”‚ (Background AI) â”‚
                                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ ê° ì„œë¹„ìŠ¤ ì—­í• 

### ğŸŒ Gateway (`/gateway/`)
- **ì—­í• **: API í”„ë¡ì‹œ ë° ë¼ìš°íŒ…
- **í¬íŠ¸**: 8080
- **ìš©ë„**: í”„ë¡ íŠ¸ì—”ë“œì˜ ë‹¨ì¼ ì§„ì…ì 
- **íŠ¹ì§•**: ë™ì  í”„ë¡ì‹œë¡œ ëª¨ë“  ìš”ì²­ì„ News Serviceë¡œ ì „ë‹¬

### ğŸ“° News Service (`/news-service/`)
- **ì—­í• **: í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
- **í¬íŠ¸**: 8002
- **ê¸°ëŠ¥**: ë‰´ìŠ¤ ê²€ìƒ‰, AI ë¶„ì„, ìºì‹œ ê´€ë¦¬, ëŒ€ì‹œë³´ë“œ
- **íŠ¹ì§•**: Redis ìºì‹œ ë° Celery ë°±ê·¸ë¼ìš´ë“œ ì²˜ë¦¬

### ğŸ› ï¸ NewsTun Service (`/newstun-service/`)
- **ì—­í• **: ML ëª¨ë¸ í•™ìŠµ ë° ì¶”ë¡ 
- **ìš©ë„**: AI ëª¨ë¸ ê°œë°œ ë° ì‹¤í—˜
- **ìƒíƒœ**: ê°œë°œ ì¤‘ (í”„ë¡œë•ì…˜ ë¯¸ì‚¬ìš©)

## ğŸš€ ë¹ ë¥¸ ì‹œì‘ (í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œììš©)

### 1ï¸âƒ£ ì „ì²´ ì‹œìŠ¤í…œ ì‹¤í–‰
```bash
# ëª¨ë“  ì„œë¹„ìŠ¤ ì‹¤í–‰ (Gateway + News Service + Redis + Celery)
docker-compose up -d

# ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
docker-compose ps
```

### 2ï¸âƒ£ API í…ŒìŠ¤íŠ¸
```bash
# ì „ì²´ ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
chmod +x test-endpoints.sh
./test-endpoints.sh
```

### 3ï¸âƒ£ í”„ë¡ íŠ¸ì—”ë“œ ì—°ê²°
```typescript
// ê¸°ë³¸ ì„¤ì •
const GATEWAY_URL = 'http://localhost:8080';
const API_BASE = `${GATEWAY_URL}/gateway/v1/news`;

// ë‰´ìŠ¤ ê²€ìƒ‰ ì˜ˆì‹œ
const searchNews = async (query: string) => {
  const response = await fetch(`${API_BASE}/search`, {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ query, max_results: 10 })
  });
  return await response.json();
};
```

## ğŸ“‚ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
ğŸ“¦ News Analysis System
â”œâ”€â”€ ğŸŒ gateway/                 # API Gateway (í”„ë¡ íŠ¸ì—”ë“œ ì§„ì…ì )
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â”‚   â”œâ”€â”€ controller/     # ìš”ì²­ ì²˜ë¦¬ ë¡œì§
â”‚   â”‚   â”‚   â”œâ”€â”€ model/          # ë°ì´í„° ëª¨ë¸
â”‚   â”‚   â”‚   â””â”€â”€ service/        # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â””â”€â”€ main.py            # Gateway ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â”œâ”€â”€ Dockerfile
â”‚   â”œâ”€â”€ requirements.txt
â”‚   â””â”€â”€ README.md              # ğŸ¯ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì ê°€ì´ë“œ
â”‚
â”œâ”€â”€ ğŸ“° news-service/           # í•µì‹¬ ë‰´ìŠ¤ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”‚   â””â”€â”€ unified_router.py  # í†µí•© API ë¼ìš°í„°
â”‚   â”‚   â”œâ”€â”€ domain/
â”‚   â”‚   â”‚   â”œâ”€â”€ controller/     # API ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”‚   â”‚   â”œâ”€â”€ model/          # ë°ì´í„° ëª¨ë¸
â”‚   â”‚   â”‚   â””â”€â”€ service/        # ë¹„ì¦ˆë‹ˆìŠ¤ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ core/              # í•µì‹¬ ì„¤ì • ë° ì˜ì¡´ì„±
â”‚   â”‚   â”œâ”€â”€ workers/           # Celery ì‘ì—…ì
â”‚   â”‚   â””â”€â”€ main.py           # ì„œë¹„ìŠ¤ ë©”ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜
â”‚   â”œâ”€â”€ docker-compose.*.yml  # ë‹¤ì–‘í•œ ì‹¤í–‰ í™˜ê²½
â”‚   â””â”€â”€ README.md            # ì„œë¹„ìŠ¤ ìƒì„¸ ê°€ì´ë“œ
â”‚
â”œâ”€â”€ ğŸ› ï¸ newstun-service/        # ML ëª¨ë¸ ê°œë°œ í™˜ê²½
â”‚   â””â”€â”€ app/                  # (ê°œë°œ ì¤‘, í”„ë¡œë•ì…˜ ë¯¸ì‚¬ìš©)
â”‚
â”œâ”€â”€ ğŸ³ docker-compose.yml      # ì „ì²´ ì‹œìŠ¤í…œ í†µí•© ì‹¤í–‰
â”œâ”€â”€ ğŸ§ª test-endpoints.sh       # API í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸
â””â”€â”€ ğŸ“– README.md              # ğŸ“ í˜„ì¬ íŒŒì¼ (ì „ì²´ ê°€ì´ë“œ)
```

## ğŸ¯ í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì ê°€ì´ë“œ

### ğŸ”— **ì£¼ìš” URL**
- **Gateway API**: `http://localhost:8080/gateway/v1/news/`
- **Swagger UI**: `http://localhost:8080/docs`
- **News Service ì§ì ‘**: `http://localhost:8002/` (ì„ íƒì‚¬í•­)

### ğŸ“ **í•µì‹¬ API íŒ¨í„´**
```bash
# ë‰´ìŠ¤ ê²€ìƒ‰
POST /gateway/v1/news/search

# íšŒì‚¬ ë‰´ìŠ¤ ê²€ìƒ‰  
POST /gateway/v1/news/companies/{company}

# íšŒì‚¬ ë‰´ìŠ¤ AI ë¶„ì„
POST /gateway/v1/news/companies/{company}/analyze

# ëŒ€ì‹œë³´ë“œ ìƒíƒœ
GET /gateway/v1/news/dashboard/status

# ìºì‹œ ê´€ë¦¬
GET /gateway/v1/news/cache/info  
DELETE /gateway/v1/news/cache/{company}
```

### ğŸ“š **ìƒì„¸ ë¬¸ì„œ**
- **[Gateway API ì™„ì „ ê°€ì´ë“œ](./gateway/README.md)** â† ğŸ¯ **í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì í•„ìˆ˜ ë¬¸ì„œ**
- **[News Service ê¸°ìˆ  ë¬¸ì„œ](./news-service/README.md)**

## ğŸ”§ ê°œë°œ í™˜ê²½ ì„¤ì •

### ğŸ“¦ Docker Compose (ê¶Œì¥)
```bash
# ì „ì²´ ì‹œìŠ¤í…œ ì‹¤í–‰
docker-compose up -d

# ë¡œê·¸ í™•ì¸
docker-compose logs -f

# íŠ¹ì • ì„œë¹„ìŠ¤ ì¬ì‹œì‘
docker-compose restart gateway
docker-compose restart news-service

# ì‹œìŠ¤í…œ ì¢…ë£Œ
docker-compose down
```

### ğŸ› ê°œë³„ ì„œë¹„ìŠ¤ ì‹¤í–‰ (ë””ë²„ê¹…ìš©)
```bash
# Gatewayë§Œ ì‹¤í–‰
cd gateway
python -m app.main

# News Serviceë§Œ ì‹¤í–‰  
cd news-service
python -m app.main
```

## ğŸ“Š ì‹œìŠ¤í…œ ëª¨ë‹ˆí„°ë§

### ğŸ” **ìƒíƒœ í™•ì¸**
```bash
# ì „ì²´ ì‹œìŠ¤í…œ ìƒíƒœ
curl http://localhost:8080/gateway/v1/health

# ì„œë¹„ìŠ¤ ì—°ê²° í…ŒìŠ¤íŠ¸
curl http://localhost:8080/gateway/v1/debug/connection

# ëŒ€ì‹œë³´ë“œ ìƒíƒœ
curl http://localhost:8080/gateway/v1/news/dashboard/status
```

### ğŸ“ˆ **ì„±ëŠ¥ ì§€í‘œ**
- **ìºì‹œ íˆíŠ¸ìœ¨**: ì¼ë°˜ì ìœ¼ë¡œ 80% ì´ìƒ
- **ì‘ë‹µ ì‹œê°„**: ìºì‹œ íˆíŠ¸ ì‹œ < 100ms, ìºì‹œ ë¯¸ìŠ¤ ì‹œ < 2ì´ˆ
- **ë°±ê·¸ë¼ìš´ë“œ ë¶„ì„**: Celeryë¡œ ë¹„ë™ê¸° ì²˜ë¦¬

## ğŸŒŸ ì£¼ìš” íŠ¹ì§•

### âœ… **í”„ë¡ íŠ¸ì—”ë“œ ì¹œí™”ì **
- **ë‹¨ì¼ ì§„ì…ì **: Gateway í•˜ë‚˜ë¡œ ëª¨ë“  API ì ‘ê·¼
- **ì¼ê´€ëœ êµ¬ì¡°**: ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ê°€ ë™ì¼í•œ íŒ¨í„´
- **ìë™ ìºì‹œ**: ë¹ ë¥¸ ì‘ë‹µ ì†ë„ ë³´ì¥

### ğŸš€ **í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜**
- **ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤**: ë…ë¦½ì ì¸ ì„œë¹„ìŠ¤ í™•ì¥
- **ë™ì  í”„ë¡ì‹œ**: ìƒˆ API ìë™ ì§€ì›
- **Redis ìºì‹œ**: ê³ ì„±ëŠ¥ ë°ì´í„° ìºì‹±

### ğŸ›¡ï¸ **ì•ˆì •ì„±**
- **ì—ëŸ¬ ì²˜ë¦¬**: ìƒì„¸í•œ ì—ëŸ¬ ë©”ì‹œì§€
- **ë¡œê¹…**: ëª¨ë“  ìš”ì²­/ì‘ë‹µ ë¡œê¹…
- **í—¬ìŠ¤ì²´í¬**: ì‹¤ì‹œê°„ ìƒíƒœ ëª¨ë‹ˆí„°ë§

## ğŸ†˜ ë¬¸ì œ í•´ê²°

### â“ **ìì£¼ ë¬»ëŠ” ì§ˆë¬¸**

**Q: Gateway vs News Service ì§ì ‘ í˜¸ì¶œ?**
- **A**: **Gateway ì‚¬ìš© ê¶Œì¥** (`http://localhost:8080/gateway/v1/news/`)
- ì´ìœ : í”„ë¡ì‹œ ê¸°ëŠ¥, ë¡œê¹…, ì—ëŸ¬ ì²˜ë¦¬ í†µí•©

**Q: ìºì‹œê°€ ì‘ë™í•˜ì§€ ì•Šì•„ìš”**
- **A**: Redis ìƒíƒœ í™•ì¸ `docker-compose logs redis`
- ìºì‹œ ì •ë³´ í™•ì¸: `curl http://localhost:8080/gateway/v1/news/cache/info`

**Q: ë¶„ì„ì´ ëŠë ¤ìš”**
- **A**: ì²« ìš”ì²­ì€ ì‹¤ì‹œê°„ ë¶„ì„ (ëŠë¦¼), ë‘ ë²ˆì§¸ë¶€í„°ëŠ” ìºì‹œ (ë¹ ë¦„)
- Celery ìƒíƒœ í™•ì¸: `docker-compose logs celery-worker`

### ğŸ”§ **ë¡œê·¸ í™•ì¸**
```bash
# ì „ì²´ ë¡œê·¸
docker-compose logs -f

# íŠ¹ì • ì„œë¹„ìŠ¤ ë¡œê·¸
docker-compose logs -f gateway
docker-compose logs -f news-service
docker-compose logs -f redis
docker-compose logs -f celery-worker
```

## ğŸ“ ì§€ì› ë° ë¬¸ì˜

- **API ë¬¸ì„œ**: http://localhost:8080/docs
- **ì‹œìŠ¤í…œ ìƒíƒœ**: `docker-compose ps`

## ğŸ”® ë¡œë“œë§µ

- [x] ë‰´ìŠ¤ ê²€ìƒ‰ API
- [x] AI ê°ì • ë¶„ì„
- [x] ESG ì ìˆ˜ ë¶„ì„  
- [x] Redis ìºì‹œ ì‹œìŠ¤í…œ
- [x] ëŒ€ì‹œë³´ë“œ API
- [x] ë™ì  í”„ë¡ì‹œ Gateway
- [ ] ì‚¬ìš©ì ì¸ì¦ ì‹œìŠ¤í…œ
- [ ] Rate Limiting
- [ ] ë‹¤êµ­ì–´ ë‰´ìŠ¤ ì§€ì›
- [ ] ì‹¤ì‹œê°„ ì•Œë¦¼ ì‹œìŠ¤í…œ

---

## ğŸ¯ **í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì ì‹œì‘ì **

ğŸ‘‰ **[Gateway API ì™„ì „ ê°€ì´ë“œ](./gateway/README.md)**ë¥¼ ë¨¼ì € ì½ì–´ë³´ì„¸ìš”!

ëª¨ë“  API ì‚¬ìš©ë²•, ì½”ë“œ ì˜ˆì‹œ, ê·¸ë¦¬ê³  ì‹¤ìš©ì ì¸ ê°€ì´ë“œê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. 